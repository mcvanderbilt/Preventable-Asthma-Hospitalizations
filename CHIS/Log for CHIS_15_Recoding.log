1                                                          The SAS System                             08:20 Saturday, April 13, 2019

1          ;*';*";*/;quit;run;
2          OPTIONS PAGENO=MIN;
3          %LET _CLIENTTASKLABEL='CHIS_15_Recoding';
4          %LET _CLIENTPROCESSFLOWNAME='CHIS_Execution';
5          %LET
5        ! _CLIENTPROJECTPATH='C:\Users\rdy2d\OneDrive\Documents\GitHub\Preventable-Asthma-Hospitalizations\CHIS\CHIS_Analysis.egp';
6          %LET _CLIENTPROJECTPATHHOST='R90T7H56';
7          %LET _CLIENTPROJECTNAME='CHIS_Analysis.egp';
8          %LET _SASPROGRAMFILE='';
9          %LET _SASPROGRAMFILEHOST='';
10         
11         ODS _ALL_ CLOSE;
12         OPTIONS DEV=PNG;
13         GOPTIONS XPIXELS=0 YPIXELS=0;
14         FILENAME EGPDF TEMP;
15         ODS PDF(ID=EGPDF) FILE=EGPDF STYLE=Pearl;
NOTE: Writing ODS PDF(EGPDF) output to DISK destination "EGPDF", printer "PDF".
16         FILENAME EGSR TEMP;
17         ODS tagsets.sasreport13(ID=EGSR) FILE=EGSR
18             STYLE=HTMLBlue
19             STYLESHEET=(URL="file:///C:/Program%20Files/SASHome/SASEnterpriseGuide/7.1/Styles/HTMLBlue.css")
20             NOGTITLE
21             NOGFOOTNOTE
22             GPATH=&sasworklocation
23             ENCODING=UTF8
24             options(rolap="on")
25         ;
NOTE: Writing TAGSETS.SASREPORT13(EGSR) Body file: EGSR
26         
27         GOPTIONS ACCESSIBLE;
28         /************************************************************************************************************************
28       ! *****
29         **  Project Name    : Secondary Research of Asthma  Hospitalizations
29       !    **
30         **                    Masters of Science in Business Analytics Capstone Project
30       !    **
31         **                    March / April 2019
31       !    **
32         **  Author          : Matthew C. Vanderbilt
32       !    **
33         **                    Candidate & NU Scholar, National University
33       !    **
34         **                    Director of Fiscal Affairs, Department of Medicine, UC San Diego School of Medicine
34       !    **
35         **
35       ! =======================================================================================================================
35       ! **
36         **  Date Created    : 14 April 2019 08:22
36       !    **
37         **  Program Name    : CHIS_15_Recoding
37       !    **
38         **  Purpose         : Recodes variables identified with inconsistencies or too many categories acros survey years
38       !    **
39         **  Reference Note  : Some code may be adapted/used from other sources; see README for "Reference Materials"
39       !    **
40         **
40       !    **
41         *************************************************************************************************************************
2                                                          The SAS System                             08:20 Saturday, April 13, 2019

41       ! ****/
42         
43         ODS GRAPHICS ON;
44         
45         /* MASTER LIBRARY */
46         %LET localProjectPath = %SYSFUNC(SUBSTR(%SYSFUNC(DEQUOTE(&_CLIENTPROJECTPATH)), 1,
46       ! %LENGTH(%SYSFUNC(DEQUOTE(&_CLIENTPROJECTPATH))) - %LENGTH(%SYSFUNC(DEQUOTE(&_CLIENTPROJECTNAME))) ));
47         LIBNAME CHIS "&localProjectPath";
NOTE: Libref CHIS was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\Users\rdy2d\OneDrive\Documents\GitHub\Preventable-Asthma-Hospitalizations\CHIS
48         
49         /* APPLY CHIS FORMATS */
50         OPTIONS fmtsearch=(CHIS);
51         


52         PROC FORMAT LIBRARY=CHIS;
53         	
53       !  VALUE fhealthplan	-1	= 'Inapplicable'
54         						1	= 'Kaiser'
55         						2	= 'Blue Cross'
56         						3	= 'United Healthcare'
57         						4	= 'Blue Shield'
58         						5	= 'Health Net'
59         						6	= 'Aetna'
60         						7	= 'Cigna Health Care'
61         						8	= 'Medicare/Medi-Cal'
62         						9	= 'Other'
63         						;
NOTE: Format FHEALTHPLAN is already on the library CHIS.FORMATS.
NOTE: Format FHEALTHPLAN has been written to CHIS.FORMATS.
64         
65         	
65       !  VALUE fprilanguage	1	= 'English (Includes English & Other)'
66         						2	= 'Spanish'
67         						3	= 'Chinese'
68         						4	= 'Vietnamese'
69         						5	= 'Korean'
70         						6	= 'Other'
71         						;
NOTE: Format FPRILANGUAGE is already on the library CHIS.FORMATS.
NOTE: Format FPRILANGUAGE has been written to CHIS.FORMATS.
72         
73         	
73       !  VALUE fasthmastatus	1	= '1 Current Asthmatic'
74         						2	= '2 Lifetime Asthmatic'
75         						3	= '3 Non-Asthmatic'
76         						;
NOTE: Format FASTHMASTATUS is already on the library CHIS.FORMATS.
NOTE: Format FASTHMASTATUS has been written to CHIS.FORMATS.
77         
78         	
78       !  VALUE ffamtype		1	= 'Single w/o Children'
79         						2	= 'Single w/ Children'
80         						3	= 'Married w/o Children'
81         						4	= 'Married w/ Children'
82         						;
3                                                          The SAS System                             08:20 Saturday, April 13, 2019

NOTE: Format FFAMTYPE is already on the library CHIS.FORMATS.
NOTE: Format FFAMTYPE has been written to CHIS.FORMATS.
83         
84         	
84       !  VALUE fBoolean		-1	= 'NA'
85         						0	= 'False'
86         						1	= 'True';
NOTE: Format FBOOLEAN is already on the library CHIS.FORMATS.
NOTE: Format FBOOLEAN has been written to CHIS.FORMATS.
87         
88         	
88       !  VALUE fagegroup		-1	= 'NA'
89         						1	= 'Young Adult (18-39)'
90         						2	= 'Middle Aged (40-64)'
91         						3	= 'Later Adult (65+)';
NOTE: Format FAGEGROUP is already on the library CHIS.FORMATS.
NOTE: Format FAGEGROUP has been written to CHIS.FORMATS.
92         
93         	
93       !  VALUE flanguage		-1	= 'NA'
94         						1	= 'English'
95         						2	= 'Spanish'
96         						3	= 'Other';
NOTE: Format FLANGUAGE is already on the library CHIS.FORMATS.
NOTE: Format FLANGUAGE has been written to CHIS.FORMATS.
97         
98         	
98       !  VALUE fmaritstat	-1	= 'NA'
99         						1	= 'Married/Partnered'
100        						2	= 'Widowed/Separated'
101        						3	= 'Never Married';
NOTE: Format FMARITSTAT is already on the library CHIS.FORMATS.
NOTE: Format FMARITSTAT has been written to CHIS.FORMATS.
102        RUN;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

103        
104        DATA CHIS.CHIS_DATA_INTRM;
105        	SET CHIS.CHIS_DATA_RAW;
106        
107        	*Marital Status;
108        	maritstat	= -1;
109        	IF marit2	IN(1,2)	THEN maritstat = 1;
110        	IF marit2	= 3		THEN maritstat = 2;
111        	IF marit2	= 4		THEN maritstat = 3;
112        	LABEL	maritstat	= 'marital status';
113        	FORMAT	maritstat	fmaritstat.;
114        
115        	*Age Classification;
116        	agegroup	= -1;
117        	IF srage_p1 >= 18 AND srage_p1 < 40	THEN agegroup = 1;
118        	IF srage_p1 >= 40 AND srage_p1 < 65	THEN agegroup = 2;
119        	IF srage_p1 >= 65					THEN agegroup = 3;
120        	LABEL	agegroup	= 'age group';
4                                                          The SAS System                             08:20 Saturday, April 13, 2019

121        	FORMAT	agegroup 	fagegroup.;
122        	
123        	*Secondary English Proficiency;
124        	AH37 = AH37;
125        	IF AH37 < -1 THEN AH37 = -1;
126        	IF AH37 = . THEN AH37 = -1;
127        
128        	*Years of Armed Forces Service;
129        	SERVED = SERVED;
130        	IF SERVED < -1 THEN SERVED = -1;
131        	IF SERVED = . THEN SERVED = -1;
132        
133        	*Educational Atttainment;
134        	*	MA/MS/PhD coded differently in 2013 than in other years;
135        	AHEDC_P1 = AHEDC_P1;
136        	IF YEAR = 2013 AND AHEDC_P1 > 8 THEN AHEDC_P1 = AHEDC_P1-1;
137        
138        	*Telephone Calls Received;
139        	AM34 = AM34;
140        	IF AM34 < -1 THEN AM34 = -1;
141        	IF AM34 = . THEN AM34 = -1;
142        
143        	*Family Type;
144        	famtype = FAMTYP_P;
145        	IF FAMTYP_P IN(1,2,6)	THEN famtype = 1;
146        	IF FAMTYP_P = 5			THEN famtype = 2;
147        	LABEL	famtype	= 'family type';
148        	FORMAT	famtype	ffamtype.;
149        
150        	*Primary Language Spoken at Home;
151        	prilanguage = LNGHM_P1;
152        	IF LNGHM_P1 < -1 THEN prilanguage = -1;
153        	IF LNGHM_P1 IN(1,8,9,10,11,12) THEN prilanguage = 1;
154        	IF LNGHM_P1 IN(6,13) THEN prilanguage = 6;
155        	LABEL	prilanguage	= 'primary spoken language';
156        	FORMAT	prilanguage	fprilanguage.;
157        
158        	*Name of Health Plan;
159        	healthplan = AI22A_P;
160        	IF AI22A_P < -1 THEN healthplan = -1;
161        	IF AI22A_P = 8 THEN healthplan = 9;
162        	IF INSMC = 1 OR INSMD = 1 THEN healthplan = 8;
163        	LABEL	healthplan	= 'name of health plan';
164        	FORMAT	healthplan	fhealthplan.;
165        
166        	*Asthma Status;
167        	asthmastatus = 3;
168        	IF	AB17=1
169        		OR AB43 = 1
170        		OR AB98 = 1
171        		OR AB108_P > 0
172        		THEN asthmastatus = 2;
173        	IF	AB40 = 1
174        		OR AB41 = 1
175        		OR ASTCUR = 1
176        		OR ASTS = 1
177        		OR ASTYR = 1
178        		OR AB18 = 1
5                                                          The SAS System                             08:20 Saturday, April 13, 2019

179        		OR AB19 = 1
180        		OR AH13A = 1
181        		THEN asthmastatus = 1;
182        	LABEL	asthmastatus	= 'asthmatic status';
183        	FORMAT	asthmastatus	fasthmastatus.;
184        
185        RUN;

NOTE: There were 125264 observations read from the data set CHIS.CHIS_DATA_RAW.
NOTE: The data set CHIS.CHIS_DATA_INTRM has 125264 observations and 818 variables.
NOTE: DATA statement used (Total process time):
      real time           0.68 seconds
      cpu time            0.67 seconds
      

186        
187        /* CHIS.CHIS_DATA_RAW CONTENTS */
188        PROC CONTENTS DATA=CHIS.CHIS_DATA_INTRM VARNUM;
189        	TITLE 'PROC CONTENTS - CHIS.CHIS_DATA_INTRM';
190        RUN;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.35 seconds
      cpu time            0.34 seconds
      

191        
192        /* Verify Recoding */
193        PROC FREQ DATA=CHIS.CHIS_DATA_INTRM;
194        	TITLE 'PROC FREQ - CHIS.CHIS_DATA_INTRM - RECODING VALIDATION';
195        	TABLES	MARIT2*maritstat
196        			SRAGE_P1*agegroup
197        			AH37
198        			SERVED
199        			AHEDC_P1
200        			AM34
201        			FAMTYP_P*famtype
202        			LNGHM_P1*prilanguage
203        			(INSMC
204        			INSMD
205        			AI22A_P)*healthplan
206        			(AB17
207        			AB18
208        			AB19
209        			AB40
210        			AB41
211        			AB43
212        			AB98
213        			AB108_P
214        			AH13A
215        			ASTCUR
216        			ASTS
217        			ASTYR)*asthmastatus
218        			;
219        RUN;

NOTE: There were 125264 observations read from the data set CHIS.CHIS_DATA_INTRM.
NOTE: PROCEDURE FREQ used (Total process time):
6                                                          The SAS System                             08:20 Saturday, April 13, 2019

      real time           0.77 seconds
      cpu time            0.61 seconds
      

220        
221        ODS GRAPHICS OFF;
222        QUIT;
223        
224        GOPTIONS NOACCESSIBLE;
225        %LET _CLIENTTASKLABEL=;
226        %LET _CLIENTPROCESSFLOWNAME=;
227        %LET _CLIENTPROJECTPATH=;
228        %LET _CLIENTPROJECTPATHHOST=;
229        %LET _CLIENTPROJECTNAME=;
230        %LET _SASPROGRAMFILE=;
231        %LET _SASPROGRAMFILEHOST=;
232        
233        ;*';*";*/;quit;run;
234        ODS _ALL_ CLOSE;
NOTE: ODS PDF(EGPDF) printed 40 pages to C:\Users\rdy2d\AppData\Roaming\SAS\EnterpriseGuide\EGTEMP\SEG-24352-d7227d43\contents\SAS 
      Temporary Files\_TD6556_R90T7H56_\#LN00387.
235        
236        
237        QUIT; RUN;
238        
